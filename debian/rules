#!/usr/bin/make -f
# -*- makefile -*-

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

export GOPATH:=$(CURDIR)
export PATH:=$(GOPATH)/bin:$(PATH)

VERSION_RELEASE=$(shell cat $(CURDIR)/version-release)
VERSION_GIT_COMMIT=$(shell cat $(CURDIR)/version-git-commit)

%:
	dh $@

override_dh_auto_install:
	mkdir -p $(CURDIR)/debian/hockeypuck1-dump/usr/bin
	
	go build -o $(CURDIR)/debian/hockeypuck1-dump/usr/bin/hockeypuck1-dump \
		github.com/hockeypuck/hockeypuck/cmd/hockeypuck-dump
	
	dh_auto_install

override_dh_auto_clean:
	rm -rf pkg bin
	dh_auto_clean

override_dh_strip:
	:

override_dh_builddeb:
	dh_builddeb -- -Zxz

override_dh_gencontrol:
	dh_gencontrol -- $(DB_DEP)

