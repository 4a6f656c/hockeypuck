Hockeypuck: OpenPGP Key Server
==============================

Hockeypuck is being developed with design goals of performance, flexibility,
reliability and portability.

Performance: We want Hockeypuck to be able to handle heavy concurrent loads of
key submissions and search requests, with reasonable response times.

Flexibility: Alternative storage backends should be easy to integrate into the
server if necessary. The server should also support custom extensions to HKP,
to support development of new web-of-trust OpenPGP applications.

Reliability: The keyserver should be configurable to run in a resilient and
highly-available manner.

Portability: The keyserver should run on a reasonably wide variety of server
operating systems and architectures with minimal hassle and minimal dependencies.

Installation
============

Ubuntu Package
--------------

$ apt-add-repository ppa:hockeypuck/ppa
$ apt-get update
$ apt-get install hockeypuck

The Ubuntu package features nice perks like an Upstart job,
static media file installation and man pages.

Developers
==========
Go 1.1 required. Follow instructions at http://golang.org to set up a development environment.

Libraries
---------

$ go get launchpad.net/hockeypuck           # Common routes & configuration
$ go get launchpad.net/hockeypuck/hkp       # HKP protocol & endpoints
$ go get launchpad.net/hockeypuck/openpgp   # OpenPGP key processing & services

Programs
--------

# Install the Hockeypuck keyserver to $GOPATH/bin
$ go get launchpad.net/hockeypuck/cmd/hockeypuck
$ go install launchpad.net/hockeypuck/cmd/hockeypuck

# Install the HKP loader
$ go get launchpad.net/hockeypuck/cmd/hockeypuck-load
$ go install launchpad.net/hockeypuck/cmd/hockeypuck-load

Building Debian Packages
========================

Debian package build creates a $GOPATH in this top-level directory, gopath/,
which will freeze all the third-party sources used by Hockeypuck.

This enables the creation of a standalone source package.

Build dependencies require Ubuntu 13.10 (which provides Go 1.1). Ubuntu 12.04
and later distributations can build with Go 1.1 backports installed from
ppa:james-page/golang-backports.

Binary Build
------------

1. make clean && make srcclean
2. make debbin

Source Build
------------

1. make clean && make srcclean
2. make debsrc
3. dput <wherever>/ppa ../hockeypuck_x.y.z_source.changes

Cross-compile Build
-------------------

1. Set up a Go 1.1 cross-compilation environment. See
   http://dave.cheney.net/2013/07/09/an-introduction-to-cross-compilation-with-go-1-1.
2. $ scripts/crossbuild.sh

This will create distribution tarballs in dist/.
